[{"title":"tcpdump基础用法说明","date":"2018-11-19T13:50:55.391Z","path":"2018/11/19/tcpdump基础用法说明/","text":"1. 简介 tcpdump是一个用于截取网络分组，并输出分组内容的工具。根据使用者的定义对网络上的数据包进行截获。 tcpdump针对网络网络层、协议、主机、网络或端口的过滤，并提供and、or、not等逻辑语句辅助去掉无用的信息。 其官网地址为：tcpdump官网，在官网中存在完整的英文说明文档 2. 常用tcpdump语法 抓包选项12345678910-A 以ASCII格式打印出所有分组，并将链路层的头最小化-c 仅抓取指定数量的分组-i 指定监听的网络接口-n 对地址以数字方式显示，否则显示为主机名-nn 除了-n的作用外，还把端口显示为数值，否则显示端口服务器-P 指定要抓取的包是流入还是流出的包。可以给定的值为\"in\"、\"out\"、\"inout\"-XX 输出包的头部数据，会以16进制和ASCII两种方式同时输出，更详细-v 当分析和打印的时候，产生详细的输出-w 将抓包数据输出到文件中-r 从给定的数据包文件中读取数据 2.1 tcpdump表达式表达式用于筛选输出哪些类型的数据包，如果没有给定表达式，所有的数据包都将输出，否则输出表达式为true的包。在表达式中出现的shell元字符建议使用单引号包围。 一个基本的表达式单元格式为：tcpdump [options] [not] proto dir type 1234561. proto:通过给定协议限定匹配的数据包类型 常用的协议有：tcp/udp/arp/ip/ether/icmp等2. dir：指定ID的方向 可以给定的值包括src/dst/src or dst/src and dst3. type：指定ID的类型 可以给定的值有host/net/port/portrange 2.2 tcpdump示例 监视指定网络接口的数据包 1# tcpdump -i eth1 监视指定主机的数据包 123# tcpdump host 1.1.1.1# tcpdump -i eth1 src host 1.1.1.1# tcpdump -i eth1 dst host 1.1.1.1 抓取主机为1.1.1.1的网络数据指定源地址，1.1.1.1指定目的地址，1.1.1.1 监视指定端口 123# tcpdump -i eth1 port 25# tcpdump -i eth1 src port 25# tcpdump -i eth1 dst port 25 网络过滤 123# tcpdump -i eth1 net 1.1# tcpdump -i eth1 src net 1.1# tcpdump -i eth1 dst net 1.1 监视指定协议 12345# tcpdump -i eth1 arp# tcpdump -i eth1 ip# tcpdump -i eth1 tcp# tcpdump -i eth1 udp# tcpdump -i eth1 icmp 示例语句 12抓取经过eth1接口，目的地址为1.1.1.1或1.1.1.2端口是80的tcp数据# tcpdump -i eth1 '((tcp) and (port 80) and ((dst host 1.1.1.1) or (dst host 1.1.1.2)))'","tags":[]},{"title":"Linux下IP及DNS配置","date":"2018-11-18T12:03:51.923Z","path":"2018/11/18/Linux下IP及DNS配置/","text":"linux下配置IP1. 相关文件123456789101112131415161718# cd /etc/network/# vi interfaces(以下为文件内容)# This file describes the network interfaces available on your system# and how to activate them. For more information, see interfaces(5).source /etc/network/interfaces.d/*# The loopback network interfaceauto loiface lo inet loopbackauto eth0iface eth0 inet staticaddress 1.1.15.15netmask 255.255.255.0network 0.0.0.0gateway 1.1.15.1 也可用相关命令：12ifconfig eth0 x.x.x.x netmask x.x.x.x如：ifconfig eth0 1.1.1.1 netmask 255.255.0.0 2. 配置虚拟IP地址相关命令：12ifconfig eth1:0 x.x.x.x netmask 255.255.0.0如：ifconfig eth0:0 2.1.1.1 netmask 255.255.0.0 子网卡并不是实际上的网络接口设备，但可以作为网络接口在设备中出现。其必须依赖于物理网卡 3. 配置DNS相关文件1234567# vi /etc/resolv.conf(以下为文件内容)# Generated by NetworkManager# search localdomain# nameserver 192.168.23.2nameserver 114.114.114.114nameserver 8.8.8.8 修改相应的nameserver内容即可。 若不通，则可继续修改如下文件：1234567891011121314151617181920212223# vi /etc/nsswitch.conf(以下为相关内容)# /etc/nsswitch.conf## Example configuration of GNU Name Service Switch functionality.# If you have the `glibc-doc-reference' and `info' packages installed, try:# `info libc \"Name Service Switch\"' for information about this file.passwd: compatgroup: compatshadow: compatgshadow: files# hosts: files mdns4_minimal [NOTFOUND=return] dns myhostnamehosts: files dns winsnetworks: filesprotocols: db filesservices: db filesethers: db filesrpc: db filesnetgroup: nis 修改相应的hosts部分，添加dns wins即可","tags":[]},{"title":"Hello World","date":"2018-11-15T16:45:41.012Z","path":"2018/11/16/hello-world/","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","tags":[]}]